# LangGraph 기반 멀티 에이전트 시스템 요약

## 1. 시스템 목적

- 복잡하고 다면적인 사용자 쿼리를 단일 에이전트가 아닌, 전문화된 여러 에이전트의 협업으로 효율적이고 정확하게 처리
- 정보 검색, 데이터 분석, 심리 분석, 보고서 작성 등 다양한 작업을 통합적으로 지원
- 최신 웹 정보와 구조화된 지식베이스를 결합하여 고품질의 응답 제공

## 2. 주요 기능

- **감독 에이전트**: 쿼리 분석, 작업 분해 및 할당, 전체 프로세스 조정, 결과 검증
- **RAG 에이전트**: 벡터 DB 기반 지식 검색, 관련 정보 추출 및 통합 응답 생성
- **웹 검색 에이전트**: 실시간 웹/학술 정보 검색, 자료 다운로드 및 신뢰성 평가
- **데이터 분석 에이전트**: 통계 분석, 시각화, 데이터 기반 인사이트 도출
- **심리분석 에이전트**: 텍스트 감정/성격/행동 분석, 공감적 응답 생성
- **보고서 작성 에이전트**: 결과물 통합, 다양한 형식의 보고서 자동 생성

## 3. 아키텍처 개요

- **계층 구조**: 감독(조정) → 정보 검색(RAG/웹) → 처리(분석/심리) → 출력(보고서)
- **LangGraph**: 에이전트 워크플로 정의 및 상태/컨텍스트 관리
- **중앙 상태 관리자**: 에이전트 간 데이터 공유 및 중간 결과 저장
- **표준화된 JSON 메시지 프로토콜**: 에이전트 간 통신 일원화
- **확장성**: 새로운 에이전트, 데이터 소스, 도메인 추가 용이

## 4. 데이터 구조 및 지식베이스

- **지식베이스**: 일반/도메인/동적/방법론적 지식, 메타데이터, 참조 정보로 구성
- **벡터 DB**: 컬렉션별(일반, 도메인, 사용자, 생성)로 분리, 임베딩 기반 시맨틱 검색 지원
- **메타데이터 스키마**: 출처, 신뢰도, 시간, 관계, 사용 통계 등 다차원 정보 포함
- **청킹 전략**: 의미 단위별 분할, 계층적 청킹, 문서 유형별 특화
- **검색 방식**: 하이브리드(시맨틱+키워드+필터), 다단계 후보군/재순위화, 멀티 인덱스 쿼리

## 5. 프롬프트 설계의 큰 그림

- **공통 템플릿**: 역할 정의, 동작 원칙, 제약 조건, 출력 형식, 상호작용 방식 명시
- **역할별 프롬프트**: 각 에이전트의 목표, 역량, 동작 방식, 제약, 출력 포맷 구체화
- **기본 원칙**: 정확성, 효율성, 협업성, 적응성, 자기인식
- **출력 형식**: JSON 등 구조화된 응답, 출처/한계/신뢰도 명시
- **상호작용**: 에이전트 간 명확한 역할 분담과 정보 요청/응답 패턴

## 6. 통합 및 워크플로 예시

- **일반 쿼리**: 감독 → 웹/RAG → 분석/심리 → 보고서 → 감독(최종 검토)
- **지식 확장**: 감독 → 웹(검색/다운로드) → RAG(업데이트) → 보고서 → 감독
- **데이터 분석**: 감독 → 분석/RAG/심리 → 보고서 → 감독

## 7. 기술 스택 및 구현

- **주요 언어/프레임워크**: Python, LangGraph, LangChain, FastAPI
- **LLM**: OpenAI GPT-4o, 역할별 파라미터 최적화
- **벡터 DB**: Chroma(기본), FAISS/Pinecone(대안)
- **검색 API**: Google Custom Search, arXiv 등
- **데이터 처리**: pandas, numpy, matplotlib, scikit-learn 등
- **API/모듈 구조**: 에이전트, 코어, 지식, 데이터 처리, 워크플로, API 등 모듈화 